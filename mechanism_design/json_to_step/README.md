\# Mechanism JSON to STEP Converter



è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºæœºæ„è®¾è®¡ï¼ˆMechanism Designï¼‰é¢†åŸŸå¼€å‘çš„å·¥å…·ï¼Œæ—¨åœ¨é€šè¿‡ç®€å•çš„ JSON æ•°æ®å®šä¹‰ï¼Œè‡ªåŠ¨ç”ŸæˆåŒ…å«æœºæ„è¿åŠ¨å­¦çŠ¶æ€çš„ 3D STEP æ¨¡å‹ã€‚



è¯¥å·¥å…·ç‰¹åˆ«é€‚ç”¨äºæœºæ„å­¦ç ”ç©¶ã€æ•™å­¦æ¼”ç¤ºä»¥åŠåŸºäºå‚æ•°åŒ–çš„æœºæ„å¿«é€Ÿå»ºæ¨¡ã€‚å®ƒèƒ½å¤Ÿè§£æè‡ªå®šä¹‰çš„èŠ‚ç‚¹ï¼ˆJointsï¼‰ä¸è¾¹ï¼ˆEdgesï¼‰æ•°æ®ï¼ŒåŸºäº DH å‚æ•°æˆ–å¹¿ä¹‰è¿æ†å‚æ•°è®¡ç®—ä½å§¿ï¼Œå¹¶åˆ©ç”¨ `build123d` å¯¼å‡ºé€šç”¨çš„ CAD æ–‡ä»¶ã€‚



\## âœ¨ åŠŸèƒ½ç‰¹æ€§



\* \*\*å‚æ•°åŒ–å»ºæ¨¡\*\*ï¼šå®Œå…¨åŸºäº JSON é…ç½®æ–‡ä»¶ç”Ÿæˆæ¨¡å‹ã€‚

\* \*\*æ”¯æŒå¤šç§è¿æ†å‚æ•°\*\*ï¼šæ”¯æŒç»å…¸çš„ DH å‚æ•°å®šä¹‰ï¼ˆ$a$, $\\alpha$, $\\theta$, $d$ï¼‰åŠåç½®å‚æ•°ã€‚

\* \*\*è‡ªåŠ¨è¿åŠ¨å­¦æ±‚è§£\*\*ï¼šå†…ç½®è¿åŠ¨å­¦æ±‚è§£å™¨ï¼Œæ ¹æ®è¾“å…¥çš„å…³èŠ‚è§’çŠ¶æ€è‡ªåŠ¨è®¡ç®—å„è¿æ†çš„å…¨å±€ä½å§¿ã€‚

\* \*\*é€šç”¨æ ¼å¼å¯¼å‡º\*\*ï¼šç”Ÿæˆçš„ `.step` æ–‡ä»¶å¯è¢« SolidWorks, Fusion 360, FreeCAD ç­‰å‡ ä¹æ‰€æœ‰ CAD è½¯ä»¶æ‰“å¼€ã€‚

\* \*\*å¯è§†åŒ–è¾…åŠ©\*\*ï¼šè‡ªåŠ¨ä¸ºå…³èŠ‚è½´å’Œè¿æ†ç”Ÿæˆå‡ ä½•å®ä½“ï¼Œæ–¹ä¾¿ç›´è§‚æ£€æŸ¥æœºæ„æ„å‹ã€‚



\## ğŸ› ï¸ å®‰è£…è¯´æ˜



æœ¬é¡¹ç›®ä¾èµ– Python 3.8+ ä»¥åŠä»¥ä¸‹æ ¸å¿ƒåº“ï¼š



1\.  \*\*å…‹éš†æˆ–ä¸‹è½½æœ¬é¡¹ç›®\*\*

&nbsp;   ```bash

&nbsp;   git clone \[https://github.com/YourUsername/Mech-Toolbox.git](https://github.com/YourUsername/Mech-Toolbox.git)

&nbsp;   cd Mech-Toolbox/mechanism\_design/json\_to\_step

&nbsp;   ```



2\.  \*\*å®‰è£…ä¾èµ–\*\*

&nbsp;   å»ºè®®åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œç„¶åè¿è¡Œï¼š

&nbsp;   ```bash

&nbsp;   pip install numpy build123d

&nbsp;   ```

&nbsp;   \* `numpy`: ç”¨äºçŸ©é˜µè¿ç®—å’Œè¿åŠ¨å­¦æ±‚è§£ã€‚

&nbsp;   \* `build123d`: å¼ºå¤§çš„å‚æ•°åŒ– CAD å»ºæ¨¡åº“ï¼Œç”¨äºç”Ÿæˆå‡ ä½•å®ä½“ã€‚



\## ğŸš€ å¿«é€Ÿå¼€å§‹



1\.  \*\*å‡†å¤‡æ•°æ®æ–‡ä»¶\*\*ï¼šåœ¨ `data/` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª JSON æ–‡ä»¶ï¼ˆå‚è€ƒ `data/Bennett.json`ï¼‰ã€‚

2\.  \*\*è¿è¡Œè½¬æ¢è„šæœ¬\*\*ï¼š

&nbsp;   ä¿®æ”¹ `test\_runner.py` ä¸­çš„è¾“å…¥æ–‡ä»¶åï¼Œæˆ–è€…ç›´æ¥è¿è¡Œï¼š

&nbsp;   ```bash

&nbsp;   python test\_runner.py

&nbsp;   ```

3\.  \*\*æŸ¥çœ‹ç»“æœ\*\*ï¼šç”Ÿæˆçš„ STEP æ–‡ä»¶å°†ä¿å­˜åœ¨ `output/` ç›®å½•ä¸‹ã€‚



\## ğŸ“„ æ•°æ®æ ¼å¼è¯´æ˜ (JSON Schema)



è¾“å…¥æ•°æ®å¿…é¡»åŒ…å« `joints` å’Œ `edges` ä¸¤ä¸ªæ ¸å¿ƒå­—æ®µã€‚



\### 1. Joints (å…³èŠ‚)

å®šä¹‰æœºæ„ä¸­æ‰€æœ‰å…³èŠ‚çš„ ID å’Œç±»å‹ã€‚

\* `Key`: å…³èŠ‚å”¯ä¸€ ID (å¦‚ "1", "2")

\* `Value`: å…³èŠ‚ç±»å‹ ("R" ä»£è¡¨æ—‹è½¬å‰¯, "P" ä»£è¡¨ç§»åŠ¨å‰¯ - \*ç›®å‰ä¸»è¦æ”¯æŒ Rå’ŒP\*)



\### 2. Edges (è¿æ†/è¾¹)

å®šä¹‰è¿æ¥ä¸¤ä¸ªå…³èŠ‚çš„è¿æ†å‚æ•°ã€‚

\* `Key`: æ ¼å¼ä¸º `"SourceID\_TargetID"` (å¦‚ "1\_2")

\* `Value`: åŒ…å«ä»¥ä¸‹å‡ ä½•ä¸çŠ¶æ€å‚æ•°çš„å¯¹è±¡ï¼š



| å‚æ•°å­—æ®µ | ç±»å‹ | è¯´æ˜ | å¯¹åº” DH å‚æ•° |

| :--- | :--- | :--- | :--- |

| `a` | float | è¿æ†é•¿åº¦ (å…¬å‚çº¿é•¿åº¦) | $a$ |

| `alpha` | float | è¿æ†æ‰­è½¬è§’ (å¼§åº¦) | $\\alpha$ |

| `offset\_source` | float | èµ·å§‹å…³èŠ‚å¤„çš„è½´å‘åç½® | $d$ (éƒ¨åˆ†) |

| `offset\_target` | float | ç›®æ ‡å…³èŠ‚å¤„çš„è½´å‘åç½® | $d$ (éƒ¨åˆ†) |

| `state\_source` | float | èµ·å§‹å…³èŠ‚çš„å½“å‰è§’åº¦/ä½ç§» | $\\theta$ (Source) |

| `state\_target` | float | ç›®æ ‡å…³èŠ‚çš„å½“å‰è§’åº¦/ä½ç§» | $\\theta$ (Target) |



\### ğŸ“ æ•°æ®ç¤ºä¾‹ (Bennett æœºæ„)



```json

{
  "data": {
    "joints": {
      "1": "R",
      "2": "R",
      "3": "R",
      "4": "R"
    },
    "edges": {
      "1_2": {"a": 10.0, "alpha": 2.6180, "offset_source": 0.0, "offset_target": 0.0, "state_source": -0.5236, "state_target": -0.5651},
      "2_3": {"a": 17.32, "alpha": 2.0944, "offset_source": 0.0, "offset_target": 0.0, "state_source": 0.5651, "state_target": -0.5236},
      "3_4": {"a": 10.0, "alpha": 2.6180, "offset_source": 0.0, "offset_target": 0.0, "state_source": 0.5236, "state_target": 0.5651},
      "1_4": {"a": 17.32, "alpha": 2.0944, "offset_source": 0.0, "offset_target": 0.0, "state_source": 0.5236, "state_target": -0.5651}
    }
  }
}

